<!DOCTYPE html>
<html>
	<head>
		<title>WebQR interface</title>
		<script src='js/raphael-min.js'></script>
		<script src='js/qr_objects.js'></script>
	</head>
	<body>
		<script>
			// Create canvas
			var paper = Raphael(0,0,window.innerWidth, window.innerHeight);
			// Create background, in order to interact with it (clicks)
			//   and to store data shared by objects on the canvas (selection)
			var bg = paper.rect(0, 0, window.innerWidth, window.innerHeight);
			// Set background colors
			bg.attr({stroke: "#333", fill: "#ccc"});
			// Set action on dblclick on bg: Create circle
			bg.dblclick(function(e){
				// Request id from server for new circle
				xhr = new XMLHttpRequest();
				xhr.open("POST","/circle", true)
				xhr.onreadystatechange = function() {
					if (xhr.readyState == 4 && xhr.status == 200) {
						id = xhr.responseText;
						// Create new circle
						c = new CircleObj(id, paper,bg,e.clientX,e.clientY);
					}
				}
				xhr.send({method:"add"});
			});
		</script>
	</body>
</html>
